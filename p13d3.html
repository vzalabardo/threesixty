<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ThreeSixty Club</title>
  <link href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%;width:100%;overflow:hidden;font-family:'Bai Jamjuree',sans-serif;color:#fff;background:#000}

    .container{
      display:flex;flex-direction:column;justify-content:space-between;height:100%;width:100%;
      background:url('p3a/background.png') no-repeat center/cover;position:relative
    }
    .overlay{position:absolute;inset:0;background:rgba(0,0,0,.85);z-index:1}
    .content{position:relative;z-index:2;display:flex;flex-direction:column;height:100%;text-align:center;padding:20px}

    /* Header */
    .top{display:flex;flex-direction:column;align-items:center}
    .logo img{max-width:150px;height:auto}
    .separator{width:100%;height:2px;background:#fff;margin:3px 0 1px}

    /* Middle (carousel) */
    .middle{
      flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;padding:20px 0
    }

    /* Título añadido */
    .title{
      font-size:28px; font-weight:700; letter-spacing:.5px; text-transform:uppercase;
      color:rgb(224,184,109);
    }

    .carousel-wrap{
      position:relative;width:min(100%,1000px);padding:0 56px; /* espacio para flechas en desktop */
    }

    .carousel{
      display:flex;gap:16px;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;
      -webkit-overflow-scrolling:touch;padding-bottom:2px
    }
    .carousel::-webkit-scrollbar{display:none}
    .slide{
      flex:0 0 85vw; /* móvil: ocupa gran parte del ancho */
      max-width:820px;aspect-ratio:16/9;scroll-snap-align:center;position:relative;border-radius:16px;overflow:hidden;
      border:1px solid rgba(255,255,255,.2);box-shadow:0 10px 30px rgba(0,0,0,.35)
    }
    .slide img{width:100%;height:100%;object-fit:cover;display:block}

    /* Dots */
    .dots{display:flex;justify-content:center;align-items:center;gap:8px;margin-top:10px}
    .dot{
      width:10px;height:10px;border-radius:999px;background:rgba(255,255,255,.35);border:1px solid rgba(255,255,255,.7);
      cursor:pointer;transition:transform .2s ease, background .2s ease, width .2s ease
    }
    .dot.active{background:rgb(224,184,109);width:22px}

    /* Arrows (desktop) */
    .arrow{
      position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:999px;border:1px solid rgba(255,255,255,.5);
      background:rgba(0,0,0,.35);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;
      cursor:pointer;user-select:none;opacity:.85;transition:opacity .2s ease, transform .1s ease
    }
    .arrow:hover{opacity:1}
    .arrow:active{transform:translateY(-50%) scale(.98)}
    .arrow svg{width:22px;height:22px;stroke:#fff;fill:none;stroke-width:2}
    .arrow.left{left:6px}
    .arrow.right{right:6px}

    /* Mostrar flechas solo en dispositivos con puntero preciso (desktop/laptop) */
    @media (pointer:coarse){
      .carousel-wrap{padding:0}
      .arrow{display:none}
      .slide{flex-basis:88vw}
    }

    /* Controles inferiores SOLO móvil: flechas a los lados de los dots */
    .controls{display:none;margin-top:10px;align-items:center;justify-content:center;gap:12px}
    .m-arrow{
      width:40px;height:40px;border-radius:999px;border:1px solid rgba(255,255,255,.5);
      background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;
      box-shadow:0 2px 10px rgba(0,0,0,.35);cursor:pointer
    }
    .m-arrow svg{width:18px;height:18px;stroke:#fff;fill:none;stroke-width:2}
    @media (max-width:640px){
      .controls{display:flex;}
    }

    /* Footer */
    .bottom{display:flex;justify-content:center;padding:20px 0}
    .bottom a{ text-decoration:none }
    .bottom button{
      background:rgba(255,165,0,1);border:2px solid #fff;color:#000;font-size:18px;border-radius:12px;font-weight:bold;
      padding:6px 64px;cursor:pointer;text-transform:uppercase;font-style:italic;
      box-shadow:0 0 10px rgba(255,165,0,.7),0 0 20px rgba(255,165,0,.7),0 0 30px rgba(255,165,0,.7);
      transition:box-shadow .3s ease-in-out
    }
    .bottom button:hover{
      background:rgba(255,165,0,.9);color:#fff;
      box-shadow:0 0 20px rgba(255,165,0,1),0 0 40px rgba(255,165,0,1),0 0 60px rgba(255,165,0,1)
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="overlay"></div>
    <div class="content">
      <!-- Header -->
      <div class="top">
        <div class="logo">
          <img src="assets/LogoBlanco.png" alt="Logo">
        </div>
        <div class="separator"></div>
      </div>

      <!-- Middle: Title + Carousel -->
      <div class="middle">
        <h2 class="title">THE COSTA BRAVA</h2>
        <h2 class="title" style="font-style: italic; font-weight: 200; font-size: 22px;">Europe’s most beautiful coastline</h2>
        <div class="carousel-wrap">
          <button class="arrow left" aria-label="Previous">
            <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
          </button>

          <div class="carousel" id="carousel" aria-label="Gallery" tabindex="0">
            <figure class="slide"><img src="p13d3/costa brava 1.webp" alt=""></figure>
            <figure class="slide"><img src="p13d3/costa brava 2.webp" alt=""></figure>
            <figure class="slide"><img src="p13d3/costa brava 3.jpg" alt=""></figure>
            <figure class="slide"><img src="p13d3/costa brava 4.jpg" alt=""></figure>
            <figure class="slide"><img src="p13d3/costa brava 5.webp" alt=""></figure>
            <figure class="slide"><img src="p13d3/costa brava 6.jpg" alt=""></figure>

          </div>

        <h3 style="margin-top: 14px; font-size: 15px;">A place of golden light, world-class gastronomy, and natural beauty, perfectly positioned between the coast, the mountains, and Barcelona.</h3>

          <button class="arrow right" aria-label="Next">
            <svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg>
          </button>
        </div>

        <!-- Controles inferiores móvil: flechas + dots -->
        <div class="controls" id="controls">
          <button class="m-arrow m-left" aria-label="Previous slide (mobile)">
            <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
          </button>

          <div class="dots" id="dots" aria-label="Slide indicators" role="tablist"></div>

          <button class="m-arrow m-right" aria-label="Next slide (mobile)">
            <svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg>
          </button>
        </div>
      </div>

      <!-- Footer -->
      <div class="bottom">
        <a href="p13aa.html">
          <button>NEXT</button>
        </a>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const carousel = document.getElementById('carousel');
      const slides = Array.from(carousel.querySelectorAll('.slide'));
      const dotsContainer = document.getElementById('dots');

      const left = document.querySelector('.arrow.left');
      const right = document.querySelector('.arrow.right');
      const mLeft = document.querySelector('.m-arrow.m-left');
      const mRight = document.querySelector('.m-arrow.m-right');

      let currentIndex = 0;
      const getSnapWidth = () => slides[0].getBoundingClientRect().width + 16; // slide + gap

      // Build dots
      slides.forEach((_, i) => {
        const b = document.createElement('button');
        b.className = 'dot' + (i===0 ? ' active' : '');
        b.setAttribute('role','tab');
        b.setAttribute('aria-label', `Go to slide ${i+1}`);
        b.addEventListener('click', () => goTo(i));
        dotsContainer.appendChild(b);
      });
      const dots = Array.from(dotsContainer.querySelectorAll('.dot'));

      // Desktop arrows
      left.addEventListener('click', () => goTo(Math.max(0, currentIndex - 1)));
      right.addEventListener('click', () => goTo(Math.min(slides.length - 1, currentIndex + 1)));

      // Mobile bottom arrows
      mLeft.addEventListener('click', () => goTo(Math.max(0, currentIndex - 1)));
      mRight.addEventListener('click', () => goTo(Math.min(slides.length - 1, currentIndex + 1)));

      // Keyboard
      carousel.addEventListener('keydown', (e)=>{
        if(e.key === 'ArrowRight') { e.preventDefault(); goTo(Math.min(slides.length - 1, currentIndex + 1)); }
        if(e.key === 'ArrowLeft')  { e.preventDefault(); goTo(Math.max(0, currentIndex - 1)); }
      });

      // Sync on scroll
      let ticking = false;
      carousel.addEventListener('scroll', () => {
        if (ticking) return;
        window.requestAnimationFrame(() => {
          const idx = Math.round(carousel.scrollLeft / getSnapWidth());
          if (idx !== currentIndex) setActive(idx);
          ticking = false;
        });
        ticking = true;
      });

      // Keep index on resize
      let resizeTimer;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => goTo(currentIndex, false), 120);
      });

      function goTo(index, smooth=true){
        currentIndex = index;
        const x = index * getSnapWidth();
        carousel.scrollTo({left:x, behavior: smooth ? 'smooth' : 'auto'});
        setActive(index);
      }
      function setActive(index){
        currentIndex = index;
        dots.forEach((d,i)=>d.classList.toggle('active', i===index));

        // Desktop arrows states
        left.style.opacity = index === 0 ? .45 : .85;
        left.style.pointerEvents = index === 0 ? 'none' : 'auto';
        right.style.opacity = index === slides.length-1 ? .45 : .85;
        right.style.pointerEvents = index === slides.length-1 ? 'none' : 'auto';

        // Mobile arrows states
        mLeft.style.opacity = index === 0 ? .45 : .95;
        mLeft.style.pointerEvents = index === 0 ? 'none' : 'auto';
        mRight.style.opacity = index === slides.length-1 ? .45 : .95;
        mRight.style.pointerEvents = index === slides.length-1 ? 'none' : 'auto';
      }

      // Init
      setActive(0);
    })();
  </script>
</body>
</html>
